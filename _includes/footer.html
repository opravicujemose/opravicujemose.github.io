<div id="show-about-btn" class="close-btn info-toggle-circle" onclick="showAbout()" title="Prikaži opis podkasta" style="display: none;">
  <span>ⓘ</span>
</div>

<script>
  function refreshVisibility() {
    // Ponovno poiščemo elemente, da zagotovimo, da so v DOM-u
    var aboutSection = document.getElementById('about-section');
    var showBtn = document.getElementById('show-about-btn');
    var isHidden = localStorage.getItem('aboutHidden') === 'true';

    if (aboutSection) {
      aboutSection.style.display = isHidden ? 'none' : 'block';
    }
    
    if (showBtn) {
      showBtn.style.display = isHidden ? 'block' : 'none';
    }
  }

  function hideAbout() {
    localStorage.setItem('aboutHidden', 'true');
    refreshVisibility();
  }

  function showAbout() {
    localStorage.removeItem('aboutHidden');
    refreshVisibility();
  }

  // Zaženemo takoj ob nalaganju strani
  refreshVisibility();

  // SLIDER ANIM

  // Nastavitve za avtomatski slider z omejitvijo
  let slideInterval;
  const slideDelay = 5000;    // 5 sekund na slide
  let transitionCount = 0;    // Števec preklopov
  const maxTransitions = 5;  // 1 obrati po 4 slajde = 5 + 1 da ostanemo na 1. slajdu

  function startAutoSlide() {
    slideInterval = setInterval(() => {
      const radios = document.querySelectorAll('input[name="slider"]');
      if (radios.length === 0) return;

      let currentIndex = Array.from(radios).findIndex(r => r.checked);
      let nextIndex = (currentIndex + 1) % radios.length;
      
      radios[nextIndex].checked = true;
      
      // Povečamo števec in preverimo omejitev
      transitionCount++;
      if (transitionCount >= maxTransitions) {
        stopAutoSlide();
        console.log("Avtomatsko rotiranje ustavljeno po 4 obratih.");
      }
    }, slideDelay);
  }

  function stopAutoSlide() {
    clearInterval(slideInterval);
  }

  // Zaženemo avtomatiko
  startAutoSlide();

  // Če uporabnik sam klikne na navigacijo, takoj ustavimo avtomatiko
  document.querySelectorAll('.slider__nav').forEach(nav => {
    nav.addEventListener('click', stopAutoSlide);
  });
</script>

<footer class="footer">
  <hr />
  <div>&copy; 2020-<time datetime="{{ site.time | date_to_xmlschema }}">{{ site.time | date: '%Y' }}</time> Opravičujemo se za vse nevšečnosti</div>
  <small>Site design inspired by <a href="http://motherfuckingwebsite.com" target="_blank">motherfuckingwebsite.com</a></small>
</footer>